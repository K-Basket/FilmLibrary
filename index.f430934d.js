async function e(e){const t=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=c05652c397b2dd01065e8cba4a8a45ab&page=${e}`);return await t.json()}async function t(e,t){const n=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=c05652c397b2dd01065e8cba4a8a45ab&query=${e}&page=${t}&include_adult=false`);return await n.json()}async function n(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=c05652c397b2dd01065e8cba4a8a45ab`);return await t.json()}const a=document.querySelector(".js-btn-home"),o=document.querySelector(".js-btn-mylibrary"),s=document.querySelector("#search-form"),c=document.querySelector(".js-btn-watched"),i=document.querySelector(".js-btn-queue"),l=document.querySelector("#movie-list"),d=document.querySelector("#btn-load-more"),r=document.querySelector(".js-backdrop"),u=document.querySelector(".js-modal-close"),m=document.querySelector("#modal");function p(e){return e.map((e=>`\n<li class="movie-item" id="movie-item" data-id="${e.id}">\n  <article class="movie article">\n    <div class="movie-card-thumb">\n      ${e.poster_path?`\n      <img\n        src="https://image.tmdb.org/t/p/w500${e.poster_path}"\n        alt="poster ${e.title}"\n      />`:'<img\n        src="https://image.tmdb.org/t/p/w500/dykOcAqI01Fci5cKQW3bEUrPWwU.jpg"\n        alt="poster none"\n      />'}\n    </div>\n    <div class="movie-content">\n      <h3 class="movie-title">${e.title}</h3>\n      <p class="movie-genre">${e.genre_ids} | ${e.release_date}</p>\n    </div>\n  </article>\n</li>`)).join("")}function v(e,t){e.insertAdjacentHTML("beforeend",t)}function h(e){if("UL"!==e.target.nodeName)return Number(e.target.closest("#movie-item").dataset.id)}function b(e){const{height:t}=e.firstElementChild.getBoundingClientRect();window.scrollBy({top:2*t,behavior:"smooth"})}function g(e,t){t.page===t.total_pages?e.classList.add("visually-hidden"):e.classList.remove("visually-hidden")}function y(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e.message)}}function f(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.error(e.message)}}function w(e){null===localStorage.getItem(e)&&localStorage.setItem(e,"[]")}function L(e){"[]"===localStorage.getItem(e)&&localStorage.removeItem(e)}function $(e){e.classList.toggle("btn-active")}console.log("ðŸ’™ðŸ’› K-Basket"),a.addEventListener("click",(function(){a.classList.add("btn-black"),o.classList.remove("btn-black"),s.classList.remove("visually-hidden"),c.classList.add("visually-hidden"),i.classList.add("visually-hidden")})),o.addEventListener("click",(function(){a.classList.remove("btn-black"),o.classList.add("btn-black"),s.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),i.classList.remove("visually-hidden")})),window.addEventListener("load",S),d.addEventListener("click",S),s.addEventListener("submit",(async function(e){if(e.preventDefault(),q=e.currentTarget.searchQuery.value,""===q)return;l.innerHTML="",k=1,d.removeEventListener("click",S),d.addEventListener("click",E),e.currentTarget.reset();try{const e=await t(q,k);console.log("Search",e),v(l,p(e.results)),g(d,e),k+=1}catch(e){console.log(e)}}));let k=1,q="";async function S(){try{const t=await e(k);v(l,p(t.results)),g(d,t),1!==k&&b(l),k+=1}catch(e){console.warn(e)}}async function E(){try{const e=await t(q,k);console.log("SearchLoadMoree",e),v(l,p(e.results)),b(l),g(d,e),k+=1}catch(e){console.log(e)}}l.addEventListener("click",(async function(e){if(j=h(e),!h(e))return;w("watched"),w("queue"),document.body.classList.add("show-modal","stop-scroll");try{const e=await n(j);v(m,`\n  <div class="modal-poster-wrap">\n    <img\n      class="modal-poster-img"\n      src="https://image.tmdb.org/t/p/w500/${(t=e).poster_path}"\n      alt="poster ${t.title}"\n    />\n  </div>\n  <div class="modal-movie-description">\n    <h2 class="modal-movie-title">${t.title}</h2>\n    <ul class="modal-movie-descrn-list">\n      <li class="modal-movie-descrp-item">\n        <p class="descrp-title">Vote / Votes</p>\n        <p class="descrp-text">\n          <span>${t.vote_average.toFixed(1)}</span> <span>/</span> <span>${t.vote_count}</span>\n        </p>\n      </li>\n      <li class="modal-movie-descrp-item">\n        <p class="descrp-title">Popularity</p>\n        <p class="descrp-text">${t.popularity.toFixed(1)}</p>\n      </li>\n      <li class="modal-movie-descrp-item">\n        <p class="descrp-title">Original Title</p>\n        <p class="descrp-text">${t.original_title}</p>\n      </li>\n      <li class="modal-movie-descrp-item">\n        <p class="descrp-title">Genre</p>\n        <p class="descrp-text">${t.genres.map((e=>e.name)).join(", ")}</p>\n      </li>\n    </ul>\n    <p class="modal-movie-about-title">About</p>\n    <p class="modal-movie-about-text">\n      ${t.overview}\n    </p>\n    <div class="modal-btn">\n      <button class="btn btn-watched btn-add-to" type="button" data-action="watched" id="add-to-watched">add to Watched</button>\n      <button class="btn btn-queue btn-add-to" type="button" data-action="queue" id="add-to-queue">add to Queue</button>\n    </div>\n  </div>`)}catch(e){console.warn(e)}var t;x("watched",j),x("queue",j),console.log("Movie ID:",j)})),u.addEventListener("click",I),r.addEventListener("click",(function(e){e.currentTarget===e.target&&I()})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&I()})),m.addEventListener("click",(function(e){_(e,"watched"),_(e,"queue")}));let j=null;function _(e,t){const n=e.target;let a=f(t);n.dataset.action===t&&(a.includes(j)?(a.splice(a.indexOf(j),1),y(t,a),n.textContent=`Add to ${t}`,$(n)):(a.push(j),y(t,a),n.textContent=`Remove from ${t}`,$(n)))}function x(e,t){const n=document.querySelector(`#add-to-${e}`);f(e).includes(t)&&(n.textContent=`Remove from ${e}`,$(n))}function I(){L("watched"),L("queue"),document.body.classList.remove("show-modal","stop-scroll"),m.innerHTML=""}
//# sourceMappingURL=index.f430934d.js.map
