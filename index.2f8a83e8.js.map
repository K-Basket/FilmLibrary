{"mappings":"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","sources":["src/js/fetchDataApi.js","src/js/elements.js","src/js/fn-project.js","src/js/page-home.js"],"sourcesContent":["const API_KEY = 'c05652c397b2dd01065e8cba4a8a45ab';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst TREND_URL = `${BASE_URL}/trending/movie/week`;\nconst SEARCH_URL = `${BASE_URL}/search/movie`;\n\nexport async function getTrendMovieData(page) {\n  const response = await fetch(`${TREND_URL}?api_key=${API_KEY}&page=${page}`);\n  return await response.json();\n}\n\nexport async function getSearchMovieData(query, page) {\n  const response = await fetch(\n    `${SEARCH_URL}?api_key=${API_KEY}&query=${query}&page=${page}&include_adult=false`\n  );\n  return await response.json();\n}\n","export const btnHomeEl = document.querySelector('.js-btn-home');\nexport const btnMyLibraryEl = document.querySelector('.js-btn-mylibrary');\nexport const formSearchEl = document.querySelector('#search-form');\nexport const btnWatchedEl = document.querySelector('.js-btn-watched');\nexport const btnQueueEl = document.querySelector('.js-btn-queue');\nexport const movieListEl = document.querySelector('#movie-list');\nexport const btnLoadMoreEl = document.querySelector('#btn-load-more');\n","// —Å–æ–æ–∑–¥–∞–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–∞ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã\nexport function createMovieCard(movies) {\n  return movies\n    .map(el => {\n      return `\n<li class=\"movie-item\" id=\"movie-item\" data-id=\"${el.id}\">\n  <article class=\"movie article\">\n    <div class=\"movie-card-thumb\">\n      ${\n        el.poster_path\n          ? `\n      <img\n        src=\"https://image.tmdb.org/t/p/w500${el.poster_path}\"\n        alt=\"poster ${el.title}\"\n      />`\n          : `<img\n        src=\"https://image.tmdb.org/t/p/w500/dykOcAqI01Fci5cKQW3bEUrPWwU.jpg\"\n        alt=\"poster none\"\n      />`\n      }\n    </div>\n    <div class=\"movie-content\">\n      <h3 class=\"movie-title\">${el.title}</h3>\n      <p class=\"movie-genre\">${el.genre_ids} | ${el.release_date}</p>\n    </div>\n  </article>\n</li>`;\n    })\n    .join('');\n}\n\n// —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ä–∞–∑–º–µ—Ç–∫—É\nexport function renderMovieGallery(element, markup) {\n  element.insertAdjacentHTML('beforeend', markup);\n}\n\n// –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç id —Ñ–∏–ª—å–º–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–∞—Ä—Ç–æ—á—É\nexport function getMovieId(evt) {\n  if (evt.target.nodeName === 'UL') {\n    return;\n  }\n\n  return evt.target.closest('#movie-item').dataset.id;\n}\n\n// —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–ª–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª\nexport function addSmoothScroling(element) {\n  const { height: cardHeight } =\n    element.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É LoadMore\nexport function removesBtnLoadMore(element, data) {\n  if (data.page === data.total_pages) {\n    element.classList.add('visually-hidden');\n  } else {\n    element.classList.remove('visually-hidden');\n  }\n}\n","console.log('üíôüíõ K-Basket');\n\nimport {\n  movieListEl,\n  btnHomeEl,\n  btnMyLibraryEl,\n  formSearchEl,\n  btnWatchedEl,\n  btnQueueEl,\n  btnLoadMoreEl,\n} from './elements';\n\nimport { getTrendMovieData, getSearchMovieData } from './fetchDataApi';\n\nimport {\n  getMovieId,\n  createMovieCard,\n  renderMovieGallery,\n  addSmoothScroling,\n  removesBtnLoadMore,\n} from './fn-project';\n\nbtnHomeEl.addEventListener('click', onGoHome);\nbtnMyLibraryEl.addEventListener('click', onGoMyLibrary);\nwindow.addEventListener('load', onTrendMovie);\nbtnLoadMoreEl.addEventListener('click', onTrendMovie);\nformSearchEl.addEventListener('submit', onSearchMovie);\nmovieListEl.addEventListener('click', onClickMovie);\n\nlet page = 1;\nlet query = '';\n\nfunction onGoHome() {\n  btnHomeEl.classList.add('btn-black');\n  btnMyLibraryEl.classList.remove('btn-black');\n  formSearchEl.classList.remove('visually-hidden');\n  btnWatchedEl.classList.add('visually-hidden');\n  btnQueueEl.classList.add('visually-hidden');\n}\n\nfunction onGoMyLibrary() {\n  btnHomeEl.classList.remove('btn-black');\n  btnMyLibraryEl.classList.add('btn-black');\n  formSearchEl.classList.add('visually-hidden');\n  btnWatchedEl.classList.remove('visually-hidden');\n  btnQueueEl.classList.remove('visually-hidden');\n}\n\nasync function onTrendMovie() {\n  try {\n    const data = await getTrendMovieData(page);\n    console.log('Trending', data);\n\n    renderMovieGallery(movieListEl, createMovieCard(data.results));\n    removesBtnLoadMore(btnLoadMoreEl, data);\n\n    if (page !== 1) {\n      addSmoothScroling(movieListEl);\n    }\n\n    page += 1;\n  } catch (error) {\n    console.warn(error);\n  }\n}\n\nasync function onSearchMovie(evt) {\n  evt.preventDefault();\n\n  query = evt.currentTarget.searchQuery.value;\n\n  if (query === '') {\n    return;\n  }\n\n  movieListEl.innerHTML = '';\n\n  page = 1;\n\n  btnLoadMoreEl.removeEventListener('click', onTrendMovie);\n  btnLoadMoreEl.addEventListener('click', onSearchLoadMore);\n\n  evt.currentTarget.reset();\n\n  try {\n    const data = await getSearchMovieData(query, page);\n    console.log('Search', data);\n\n    renderMovieGallery(movieListEl, createMovieCard(data.results));\n    removesBtnLoadMore(btnLoadMoreEl, data);\n\n    page += 1;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onSearchLoadMore() {\n  try {\n    const data = await getSearchMovieData(query, page);\n    console.log('SearchLoadMoree', data);\n\n    renderMovieGallery(movieListEl, createMovieCard(data.results));\n    addSmoothScroling(movieListEl);\n    removesBtnLoadMore(btnLoadMoreEl, data);\n\n    page += 1;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onClickMovie(evt) {\n  console.log(getMovieId(evt));\n}\n"],"names":["async","$d0415c1253988d4a$export$b0c7ab0fa97c1deb","page","response","fetch","json","$d0415c1253988d4a$export$1b45f2aae4f9e707","query","$fb4a1fb27e815b6d$export$d839462d570d2885","document","querySelector","$fb4a1fb27e815b6d$export$60ad107fa98fd3b3","$fb4a1fb27e815b6d$export$757314942ef3e796","$fb4a1fb27e815b6d$export$18cc3c3949cc67b9","$fb4a1fb27e815b6d$export$ca3bb736bd680db0","$fb4a1fb27e815b6d$export$47793179a5429b6d","$fb4a1fb27e815b6d$export$1d975959fa51d6a","$940831194f6822d5$export$9d27b867a89df126","movies","map","el","id","poster_path","title","genre_ids","release_date","join","$940831194f6822d5$export$5bb83f4ae092e558","element","markup","insertAdjacentHTML","$940831194f6822d5$export$1b0d348707227ded","evt","target","nodeName","closest","dataset","$940831194f6822d5$export$45bf482877486fbe","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$940831194f6822d5$export$9577fff3fd7bcfa4","data","total_pages","classList","add","remove","console","log","addEventListener","$11d723d1044d8ea2$var$onTrendMovie","preventDefault","$11d723d1044d8ea2$var$query","currentTarget","searchQuery","value","innerHTML","$11d723d1044d8ea2$var$page","removeEventListener","$11d723d1044d8ea2$var$onSearchLoadMore","reset","results","error","warn"],"version":3,"file":"index.2f8a83e8.js.map"}